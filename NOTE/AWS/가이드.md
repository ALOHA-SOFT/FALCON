1. EC2 ìƒì„± 
 - t3.small
2. RDS ìƒì„±
 - db.t3.small
3. EIP
 - 13.134.116.196
4. S3
5. CloudFront ë°°í¬
 - d3do8c8a4htaja.cloudfront.net
6. Code Pipeline + CodeBuild ì„¤ì • (GitHub â†’ EC2 ìžë™ ë°°í¬)

## 6-0 PEM KEY ë³´ì•ˆì„¤ì •
1. ì†ì„±
2. ë³´ì•ˆ íƒ­
3. ë‹¤ë¥¸ ì‚¬ìš©ìž ë‹¤ ì œê±°
4. íŽ¸ì§‘ > í˜„ìž¬ ì‚¬ìš©ìž
5. ì½ê¸° ë° ì‹¤í–‰, ì½ê¸° ê¶Œí•œ ì²´í¬


## 6-1. AWS CLI ì„¤ì • ë° EC2 ì¤€ë¹„

### IAM ì‚¬ìš©ìž ìƒì„±
1. IAM â†’ ì‚¬ìš©ìž â†’ í•´ë‹¹ ì‚¬ìš©ìž ì„ íƒ
2. ë³´ì•ˆ ìžê²© ì¦ëª… íƒ­
3. ì•¡ì„¸ìŠ¤ í‚¤ ë§Œë“¤ê¸° í´ë¦­
4. Access Key IDì™€ Secret Access Key ì €ìž¥ (ë³´ì•ˆìƒ ì‹¤ì œ í‚¤ëŠ” ë³„ë„ ë³´ê´€)

### AWS ì½˜ì†”ì—ì„œ ê¶Œí•œ ì¶”ê°€:
IAM â†’ ì‚¬ìš©ìž â†’ falcon-dev ì„ íƒ
ê¶Œí•œ íƒ­ â†’ ê¶Œí•œ ì¶”ê°€
ì •ì±… ì§ì ‘ ì—°ê²° â†’ ë‹¤ìŒ ì •ì±…ë“¤ ì„ íƒ:
ê´€ë¦¬ìž ê¶Œí•œ:
AdministratorAccess (ì „ì²´ ê¶Œí•œ)


### AWS CLI ì„¤ì • í™•ì¸
```bash
# AWS CLI ì¸ì¦ í™•ì¸
aws sts get-caller-identity

# ìƒˆ í”„ë¡œíŒŒì¼ë¡œ AWS ìžê²© ì¦ëª… ì„¤ì •
aws configure --profile falcon-shop

# ë¦¬ì „ ì„¤ì • (ì„œìš¸)
aws configure set default.region ap-northeast-2

# ë¦¬ì „ ì„¤ì • (ìœ ëŸ½(ëŸ°ë˜))
aws configure set default.region eu-west-2

# ì´í›„ ëª¨ë“  ëª…ë ¹ì–´ì— --profile falcon-shop ì¶”ê°€
aws sts get-caller-identity --profile falcon-shop
aws ec2 describe-instances --profile falcon-shop
```

### EC2 ì¸ìŠ¤í„´ìŠ¤ ì„¤ì • (SSH ì ‘ì† í›„ ì‹¤í–‰)
```bash
# EC2ì— SSH ì ‘ì†
ssh -i your-key.pem ec2-user@13.134.116.196
ssh -i E:\DEV\FALCON\NOTE\AWS\falcon-key.pem ec2-user@13.134.116.196

# CodeDeploy Agent ì„¤ì¹˜
sudo yum update -y
sudo yum install -y ruby wget
cd /home/ec2-user
wget https://aws-codedeploy-ap-northeast-2.s3.ap-northeast-2.amazonaws.com/latest/install
chmod +x ./install
sudo ./install auto

# Java 17 ì„¤ì¹˜
sudo yum install -y java-17-amazon-corretto

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /opt/falcon-shop
sudo chown ec2-user:ec2-user /opt/falcon-shop

# EC2 ì¸ìŠ¤í„´ìŠ¤ì— íƒœê·¸ ì¶”ê°€ (CodeDeployì—ì„œ ì¸ì‹ìš©)
exit
```

### EC2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ ì¶”ê°€ (ë¡œì»¬ì—ì„œ ì‹¤í–‰)
```bash
# EC2 ì¸ìŠ¤í„´ìŠ¤ ID í™•ì¸
aws ec2 describe-instances --query 'Reservations[].Instances[].[InstanceId,PublicIpAddress,Tags[?Key==`Name`].Value|[0]]' --output table

# ì¸ìŠ¤í„´ìŠ¤ì— íƒœê·¸ ì¶”ê°€ (INSTANCE_IDë¥¼ ì‹¤ì œ IDë¡œ ë³€ê²½)
INSTANCE_ID="i-07340d027581e607b"
aws ec2 create-tags --resources $INSTANCE_ID --tags Key=Name,Value=falcon-shop-server Key=Environment,Value=production
```

## 6-2. IAM ì—­í•  ìƒì„± (AWS CLI)

### CodeBuildìš© IAM ì—­í• 
```bash
# ì‹ ë¢° ì •ì±… íŒŒì¼ ìƒì„±
'{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "codebuild.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}' | Out-File -FilePath "codebuild-trust-policy.json" -Encoding ASCII

# CodeBuild ì—­í•  ìƒì„±
aws iam create-role --role-name FalconCodeBuildRole --assume-role-policy-document file://codebuild-trust-policy.json

# í•„ìš”í•œ ì •ì±… ì—°ê²°
aws iam attach-role-policy --role-name FalconCodeBuildRole --policy-arn arn:aws:iam::aws:policy/CloudWatchLogsFullAccess
aws iam attach-role-policy --role-name FalconCodeBuildRole --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
```

### CodeDeployìš© IAM ì—­í• 
```bash
# ì‹ ë¢° ì •ì±… íŒŒì¼ ìƒì„±
'{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "codedeploy.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}' | Out-File -FilePath "codedeploy-trust-policy.json" -Encoding ASCII

# CodeDeploy ì—­í•  ìƒì„±
aws iam create-role --role-name FalconCodeDeployRole --assume-role-policy-document file://codedeploy-trust-policy.json

# ì •ì±… ì—°ê²°
aws iam attach-role-policy --role-name FalconCodeDeployRole --policy-arn arn:aws:iam::aws:policy/service-role/AWSCodeDeployRole
```

### EC2ìš© IAM ì—­í•  ë° ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼
```bash
# EC2 ì‹ ë¢° ì •ì±… íŒŒì¼ ìƒì„±
'{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "ec2.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}' | Out-File -FilePath "ec2-trust-policy.json" -Encoding ASCII



# EC2 ì—­í•  ìƒì„±
aws iam create-role --role-name FalconEC2Role --assume-role-policy-document file://ec2-trust-policy.json

# ì •ì±… ì—°ê²°
aws iam attach-role-policy --role-name FalconEC2Role --policy-arn arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess
aws iam attach-role-policy --role-name FalconEC2Role --policy-arn arn:aws:iam::aws:policy/service-role/AWSCodeDeployRole

# ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ìƒì„± ë° ì—­í•  ì—°ê²°
aws iam create-instance-profile --instance-profile-name FalconEC2InstanceProfile
aws iam add-role-to-instance-profile --instance-profile-name FalconEC2InstanceProfile --role-name FalconEC2Role

# EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ì—°ê²° (INSTANCE_IDë¥¼ ì‹¤ì œ IDë¡œ ë³€ê²½)
INSTANCE_ID="i-07340d027581e607b"
aws ec2 associate-iam-instance-profile --instance-id $INSTANCE_ID --iam-instance-profile Name=FalconEC2InstanceProfile
```

## 6-3. S3 ë²„í‚· ìƒì„± (AWS CLI) âœ… ì™„ë£Œ
```bash
# ì•„í‹°íŒ©íŠ¸ ì €ìž¥ìš© S3 ë²„í‚· ìƒì„± (ì™„ë£Œë¨)
aws s3 mb s3://falcon-shop-artifacts --region eu-west-2

# ë²„í‚· í™•ì¸
aws s3 ls | grep falcon-shop
```

## 6-4. CodeBuild í”„ë¡œì íŠ¸ ìƒì„± (AWS CLI) âœ… ì™„ë£Œ
```bash
# CodeBuild í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ ìƒì„± (ì™„ë£Œë¨)
@'
{
  "name": "falcon-shop-build",
  "description": "Falcon Shop Spring Boot application build project",
  "source": {
    "type": "GITHUB",
    "location": "https://github.com/ALOHA-SOFT/FALCON.git",
    "buildspec": "buildspec.yml"
  },
  "artifacts": {
    "type": "S3",
    "location": "falcon-shop-artifacts",
    "packaging": "ZIP"
  },
  "environment": {
    "type": "LINUX_CONTAINER",
    "image": "aws/codebuild/amazonlinux2-x86_64-standard:5.0",
    "computeType": "BUILD_GENERAL1_SMALL"
  },
  "serviceRole": "arn:aws:iam::516723930299:role/FalconCodeBuildRole"
}
'@ | Out-File -FilePath "codebuild-project.json" -Encoding ASCII

# CodeBuild í”„ë¡œì íŠ¸ ìƒì„± (ì™„ë£Œë¨)
aws codebuild create-project --cli-input-json file://codebuild-project.json

# í”„ë¡œì íŠ¸ ARN: arn:aws:codebuild:eu-west-2:516723930299:project/falcon-shop-build
```

## 6-5. WAR íŒŒì¼ ë°°í¬ ë°©ì‹ (Tomcat ì‚¬ìš©)
Spring Boot WAR íŒŒì¼ì„ Tomcatì— ë°°í¬í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### EC2ì— Tomcat ì„¤ì¹˜ ë° ì„¤ì •
```bash
# EC2ì— SSH ì ‘ì†
ssh -i E:\DEV\FALCON\NOTE\AWS\falcon-key.pem ec2-user@13.134.116.196

# Tomcat 9 ì„¤ì¹˜
sudo yum update -y
sudo yum install -y java-17-amazon-corretto tomcat

# Tomcat ì„œë¹„ìŠ¤ ì‹œìž‘ ë° í™œì„±í™”
sudo systemctl start tomcat
sudo systemctl enable tomcat

# Tomcat í¬íŠ¸ í™•ì¸ (ê¸°ë³¸ 8080)
sudo netstat -tlnp | grep :8080

# ë°°í¬ ë””ë ‰í† ë¦¬ ê¶Œí•œ ì„¤ì •
sudo chown -R tomcat:tomcat /var/lib/tomcat/webapps/
sudo chmod 755 /var/lib/tomcat/webapps/

# ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
cat > /home/ec2-user/deploy-war.sh << 'EOF'
#!/bin/bash
# FALCON Shop WAR ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

APP_NAME="falcon-shop"
TOMCAT_WEBAPPS="/var/lib/tomcat/webapps"
BACKUP_DIR="/home/ec2-user/backup"
S3_BUCKET="falcon-shop-artifacts"

# ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p $BACKUP_DIR

# Tomcat ì¤‘ì§€
sudo systemctl stop tomcat

# ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°±ì—… ë° ì œê±°
if [ -d "$TOMCAT_WEBAPPS/${APP_NAME}" ]; then
    sudo mv $TOMCAT_WEBAPPS/${APP_NAME} $BACKUP_DIR/${APP_NAME}-$(date +%Y%m%d_%H%M%S)
    echo "ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°±ì—… ì™„ë£Œ"
fi

if [ -f "$TOMCAT_WEBAPPS/${APP_NAME}.war" ]; then
    sudo mv $TOMCAT_WEBAPPS/${APP_NAME}.war $BACKUP_DIR/${APP_NAME}-$(date +%Y%m%d_%H%M%S).war
    echo "ê¸°ì¡´ WAR íŒŒì¼ ë°±ì—… ì™„ë£Œ"
fi

# S3ì—ì„œ ìµœì‹  ë¹Œë“œ ë‹¤ìš´ë¡œë“œ
aws s3 cp s3://$S3_BUCKET/falcon-shop-build --recursive /tmp/artifacts/

# WAR íŒŒì¼ ì°¾ê¸° ë° ë°°í¬
WAR_FILE=$(find /tmp/artifacts -name "*.war" | head -1)
if [ -f "$WAR_FILE" ]; then
    sudo cp $WAR_FILE $TOMCAT_WEBAPPS/${APP_NAME}.war
    sudo chown tomcat:tomcat $TOMCAT_WEBAPPS/${APP_NAME}.war
    echo "ìƒˆ WAR íŒŒì¼ ë°°í¬ ì™„ë£Œ: $WAR_FILE"
else
    echo "WAR íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    exit 1
fi

# Tomcat ì‹œìž‘
sudo systemctl start tomcat

# ë°°í¬ í™•ì¸ (ìµœëŒ€ 60ì´ˆ ëŒ€ê¸°)
echo "ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ í™•ì¸ ì¤‘..."
for i in {1..12}; do
    HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/${APP_NAME}/)
    if [ "$HTTP_STATUS" = "200" ] || [ "$HTTP_STATUS" = "302" ]; then
        echo "ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo "URL: http://13.134.116.196:8080/${APP_NAME}/"
        exit 0
    fi
    echo "ëŒ€ê¸° ì¤‘... (${i}/12)"
    sleep 5
done

echo "ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ í™•ì¸ ì‹¤íŒ¨"
sudo systemctl status tomcat
exit 1
EOF

chmod +x /home/ec2-user/deploy-war.sh
exit
```

### Tomcat í¬íŠ¸ ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
```bash
# ë³´ì•ˆ ê·¸ë£¹ì— 8080 í¬íŠ¸ ì¶”ê°€ (ë¡œì»¬ì—ì„œ ì‹¤í–‰)
# í˜„ìž¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ë³´ì•ˆ ê·¸ë£¹ ID í™•ì¸
SECURITY_GROUP_ID=$(aws ec2 describe-instances --instance-ids i-07340d027581e607b --query 'Reservations[0].Instances[0].SecurityGroups[0].GroupId' --output text)

# 8080 í¬íŠ¸ ì¸ë°”ìš´ë“œ ê·œì¹™ ì¶”ê°€
aws ec2 authorize-security-group-ingress \
    --group-id $SECURITY_GROUP_ID \
    --protocol tcp \
    --port 8080 \
    --cidr 0.0.0.0/0

echo "ë³´ì•ˆ ê·¸ë£¹ì— 8080 í¬íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."
```
```bash
# CodeDeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
aws deploy create-application \
  --application-name falcon-shop-app \
  --compute-platform Server

# ë°°í¬ ê·¸ë£¹ ìƒì„±
aws deploy create-deployment-group \
  --application-name falcon-shop-app \
  --deployment-group-name falcon-production \
  --service-role-arn arn:aws:iam::$(aws sts get-caller-identity --query Account --output text):role/FalconCodeDeployRole \
  --ec2-tag-filters Key=Name,Value=falcon-shop-server,Type=KEY_AND_VALUE \
  --deployment-config-name CodeDeployDefault.AllAtOnce

echo "CodeDeploy application created: falcon-shop-app"
```

## 6-6. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
```bash
# shop/appspec.yml ìƒì„±
cat > shop/appspec.yml << 'EOF'
version: 0.0
os: linux
files:
  - source: /build/libs
    destination: /opt/falcon-shop
hooks:
  BeforeInstall:
    - location: scripts/stop_application.sh
      timeout: 300
      runas: ec2-user
  ApplicationStart:
    - location: scripts/start_application.sh
      timeout: 300
      runas: ec2-user
  ValidateService:
    - location: scripts/validate_service.sh
      timeout: 300
      runas: ec2-user
EOF

# shop/scripts/ ë””ë ‰í† ë¦¬ ë° ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
mkdir -p shop/scripts

# shop/scripts/stop_application.sh
cat > shop/scripts/stop_application.sh << 'EOF'
#!/bin/bash
PID=$(pgrep -f "falcon-shop")
if [ -n "$PID" ]; then
    echo "Stopping application with PID: $PID"
    kill -TERM $PID
    sleep 10
fi
EOF

# shop/scripts/start_application.sh
cat > shop/scripts/start_application.sh << 'EOF'
#!/bin/bash
cd /opt/falcon-shop
nohup java -jar -Dspring.profiles.active=production *.jar > application.log 2>&1 &
echo $! > app.pid
sleep 10
EOF

# shop/scripts/validate_service.sh
cat > shop/scripts/validate_service.sh << 'EOF'
#!/bin/bash
for i in {1..10}; do
    HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/actuator/health)
    if [ "$HTTP_STATUS" = "200" ]; then
        echo "Application is running successfully"
        exit 0
    fi
    echo "Waiting for application... (attempt $i/10)"
    sleep 10
done
echo "Application failed to start"
exit 1
EOF

chmod +x shop/scripts/*.sh
```

## 6-7. í•œ ë²ˆì— ì‹¤í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# ì „ì²´ CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸

set -e
echo "ðŸš€ FALCON Shop CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì • ì‹œìž‘..."

# ë³€ìˆ˜ ì„¤ì •
INSTANCE_ID="i-07340d027581e607b"  # ì‹¤ì œ EC2 ì¸ìŠ¤í„´ìŠ¤ IDë¡œ ë³€ê²½
BUCKET_NAME="falcon-shop-pipeline-artifacts-$(date +%s)"
ACCOUNT_ID=$(aws sts get-caller-identity --query Account --output text)

echo "ðŸ“¦ S3 ë²„í‚· ìƒì„±: $BUCKET_NAME"
aws s3 mb s3://$BUCKET_NAME

echo "ðŸ·ï¸ EC2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ ì¶”ê°€"
aws ec2 create-tags --resources $INSTANCE_ID --tags Key=Name,Value=falcon-shop-server Key=Environment,Value=production

echo "ðŸ”§ CodeBuild í”„ë¡œì íŠ¸ ìƒì„±"
aws codebuild create-project \
  --name falcon-shop-build \
  --description "FALCON Shop Build Project" \
  --source type=GITHUB,location=https://github.com/ALOHA-SOFT/FALCON.git \
  --artifacts type=S3,location=$BUCKET_NAME/build-output \
  --environment type=LINUX_CONTAINER,image=aws/codebuild/amazonlinux2-x86_64-standard:5.0,computeType=BUILD_GENERAL1_SMALL \
  --service-role arn:aws:iam::$ACCOUNT_ID:role/FalconCodeBuildRole

echo "ðŸš€ CodeDeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±"
aws deploy create-application \
  --application-name falcon-shop-app \
  --compute-platform Server

aws deploy create-deployment-group \
  --application-name falcon-shop-app \
  --deployment-group-name falcon-production \
  --service-role-arn arn:aws:iam::$ACCOUNT_ID:role/FalconCodeDeployRole \
  --ec2-tag-filters Key=Name,Value=falcon-shop-server,Type=KEY_AND_VALUE \
  --deployment-config-name CodeDeployDefault.AllAtOnce

echo "âœ… ì„¤ì • ì™„ë£Œ!"
echo "ðŸ’¡ ì´ì œ GitHubì— ì½”ë“œë¥¼ pushí•˜ê³  ìˆ˜ë™ìœ¼ë¡œ ë¹Œë“œ/ë°°í¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”"
echo ""
echo "ðŸ“‹ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤:"
echo "   - S3 ë²„í‚·: $BUCKET_NAME"
echo "   - CodeBuild í”„ë¡œì íŠ¸: falcon-shop-build"
echo "   - CodeDeploy ì•±: falcon-shop-app"
echo ""
echo "ðŸ§ª í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´:"
echo "   aws codebuild start-build --project-name falcon-shop-build"
```

## 6-8. ë°°í¬ í…ŒìŠ¤íŠ¸
```bash
# ë¹Œë“œ í…ŒìŠ¤íŠ¸
echo "ðŸ§ª CodeBuild í…ŒìŠ¤íŠ¸ ì‹œìž‘..."
BUILD_ID=$(aws codebuild start-build --project-name falcon-shop-build --query 'build.id' --output text)
echo "Build ID: $BUILD_ID"

# ë¹Œë“œ ìƒíƒœ í™•ì¸
aws codebuild batch-get-builds --ids $BUILD_ID --query 'builds[0].buildStatus' --output text

# ë¹Œë“œ ë¡œê·¸ í™•ì¸ (ë¹Œë“œ ì™„ë£Œ í›„)
aws logs get-log-events --log-group-name /aws/codebuild/falcon-shop-build --log-stream-name $BUILD_ID

# ìˆ˜ë™ ë°°í¬ í…ŒìŠ¤íŠ¸ (ë¹Œë“œ ì™„ë£Œ í›„)
aws deploy create-deployment \
  --application-name falcon-shop-app \
  --deployment-group-name falcon-production \
  --s3-location bucket=$BUCKET_NAME,key=build-output,bundleType=zip
```

## 6-8. ìžë™ ë°°í¬ í…ŒìŠ¤íŠ¸
```bash
# ì½”ë“œ ë³€ê²½ í›„ GitHubì— push
git add .
git commit -m "Test automatic deployment"
git push origin main

# ìˆ˜ë™ ë¹Œë“œ íŠ¸ë¦¬ê±°ë¡œ í…ŒìŠ¤íŠ¸
aws codebuild start-build --project-name falcon-shop-build

# ë¹Œë“œ ì™„ë£Œ í›„ ë°°í¬ í…ŒìŠ¤íŠ¸
aws deploy create-deployment \
  --application-name falcon-shop-app \
  --deployment-group-name falcon-production \
  --s3-location bucket=$BUCKET_NAME,key=build-output,bundleType=zip
```

## 6-9. ë°°í¬ í™•ì¸
```bash
# EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•˜ì—¬ í™•ì¸
ssh -i your-key.pem ec2-user@13.134.116.196

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸
tail -f /opt/falcon-shop/application.log

# ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ í™•ì¸
curl http://localhost:8080/actuator/health

# CodeDeploy ì—ì´ì „íŠ¸ ìƒíƒœ í™•ì¸
sudo service codedeploy-agent status
```

## ðŸŽ¯ ê°„ë‹¨ ì‹¤í–‰ ê°€ì´ë“œ
```bash
# 1. IAM ì—­í• ë“¤ ìƒì„± (ìœ„ì˜ 6-2 ëª…ë ¹ì–´ë“¤ ì‹¤í–‰)
# 2. í•œ ë²ˆì— ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
# 3. GitHubì— appspec.ymlê³¼ scripts í´ë” ì¶”ê°€
# 4. ë¹Œë“œ/ë°°í¬ í…ŒìŠ¤íŠ¸
```

## ìžë™ ë°°í¬ í”Œë¡œìš°
```
GitHub Push (main) 
    â†“
CodePipeline íŠ¸ë¦¬ê±°
    â†“
CodeBuild (shop/gradlew build)
    â†“ 
S3ì— JAR ì•„í‹°íŒ©íŠ¸ ì €ìž¥
    â†“
CodeDeployê°€ EC2ì— ë°°í¬
    â†“
ì• í”Œë¦¬ì¼€ì´ì…˜ ìžë™ ìž¬ì‹œìž‘
```

ì´ì œ main ë¸Œëžœì¹˜ì— ì½”ë“œë¥¼ pushí•˜ë©´ ìžë™ìœ¼ë¡œ EC2ì— ë°°í¬ë©ë‹ˆë‹¤! ðŸš€ 

