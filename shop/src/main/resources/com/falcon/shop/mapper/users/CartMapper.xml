<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.falcon.shop.mapper.users.CartMapper">


    <resultMap id="CartMap" type="Carts">
        <id property="no" column="no"/>
        <result property="id" column="id"/>
        <result property="userNo" column="user_no"/>
        <result property="productNo" column="product_no"/>
        <result property="quantity" column="quantity"/>
        <result property="totalPrice" column="total_price"/>
        <result property="options" column="options"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>

        <association property="product" column="product_no" javaType="Products" select="selectProduct"></association>
    </resultMap>

    <!-- listByUser -->
    <select id="listByUser" resultMap="CartMap">
        SELECT * 
        FROM carts 
        WHERE user_no = #{userNo}
    </select>


    <select id="selectProduct" resultMap="com.falcon.shop.mapper.products.ProductMapper.ProductsMap">
        SELECT * 
        FROM products 
        WHERE no = #{productNo}
    </select>

    <select id="selectById" resultMap="CartMap">
        SELECT * 
        FROM carts 
        WHERE id = #{id}
    </select>


</mapper>
